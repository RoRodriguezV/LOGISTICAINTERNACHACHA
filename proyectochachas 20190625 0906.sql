--
-- Script was generated by Devart dbForge Studio for MySQL, Version 8.0.40.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 25/06/2019 9:06:41
-- Server version: 5.5.5-10.1.40-MariaDB
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE proyectochachas;

--
-- Drop table `asig_rol`
--
DROP TABLE IF EXISTS asig_rol;

--
-- Drop table `pedidos`
--
DROP TABLE IF EXISTS pedidos;

--
-- Drop table `roles`
--
DROP TABLE IF EXISTS roles;

--
-- Drop table `detallestock`
--
DROP TABLE IF EXISTS detallestock;

--
-- Drop table `merma`
--
DROP TABLE IF EXISTS merma;

--
-- Drop table `receta`
--
DROP TABLE IF EXISTS receta;

--
-- Drop table `producto`
--
DROP TABLE IF EXISTS producto;

--
-- Drop table `envio`
--
DROP TABLE IF EXISTS envio;

--
-- Drop table `responsable`
--
DROP TABLE IF EXISTS responsable;

--
-- Drop table `sucursal`
--
DROP TABLE IF EXISTS sucursal;

--
-- Drop table `insumo`
--
DROP TABLE IF EXISTS insumo;

--
-- Drop table `persona`
--
DROP TABLE IF EXISTS persona;

--
-- Set default database
--
USE proyectochachas;

--
-- Create table `persona`
--
CREATE TABLE persona (
  CodigoPersona varchar(255) NOT NULL,
  NombrePersona varchar(255) DEFAULT NULL,
  ApellidoPersona varchar(255) DEFAULT NULL,
  TelefonoPersona varchar(255) DEFAULT NULL,
  PassPersona varchar(255) DEFAULT NULL,
  PRIMARY KEY (CodigoPersona)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 16384,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `insumo`
--
CREATE TABLE insumo (
  CodInsumo varchar(255) NOT NULL,
  NombreInsumo varchar(255) DEFAULT NULL,
  TipoInsumo varchar(255) DEFAULT NULL,
  CantidadInsumo int(11) DEFAULT NULL,
  PRIMARY KEY (CodInsumo)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 5461,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `sucursal`
--
CREATE TABLE sucursal (
  CodSucursal varchar(255) NOT NULL,
  NombreSucursal varchar(255) DEFAULT NULL,
  DireccionSucursal varchar(255) DEFAULT NULL,
  Latitud double DEFAULT NULL,
  Longitud double DEFAULT NULL,
  TelefonoSucursal int(11) DEFAULT NULL,
  PRIMARY KEY (CodSucursal)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `responsable`
--
CREATE TABLE responsable (
  CodPersona varchar(255) NOT NULL,
  CodSucursal varchar(255) NOT NULL,
  PRIMARY KEY (CodSucursal, CodPersona)
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE responsable
ADD CONSTRAINT FK_responsable_CodPersona FOREIGN KEY (CodPersona)
REFERENCES persona (CodigoPersona) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE responsable
ADD CONSTRAINT FK_responsable_CodSucursal FOREIGN KEY (CodSucursal)
REFERENCES sucursal (CodSucursal) ON DELETE NO ACTION;

--
-- Create table `envio`
--
CREATE TABLE envio (
  CodOrigen varchar(255) DEFAULT NULL,
  CodDestino varchar(255) DEFAULT NULL,
  CodProducto varchar(255) DEFAULT NULL,
  CantidadEnvio int(11) DEFAULT NULL,
  FechaHora date DEFAULT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 2730,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE envio
ADD CONSTRAINT FK_envio_CodDestino FOREIGN KEY (CodDestino)
REFERENCES sucursal (CodSucursal) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE envio
ADD CONSTRAINT FK_envio_CodOrigen FOREIGN KEY (CodOrigen)
REFERENCES sucursal (CodSucursal) ON DELETE NO ACTION;

--
-- Create table `producto`
--
CREATE TABLE producto (
  CodProducto varchar(255) NOT NULL,
  NombreProducto varchar(255) DEFAULT NULL,
  TipoProducto varchar(255) DEFAULT NULL,
  Cantidad int(11) DEFAULT NULL,
  PRIMARY KEY (CodProducto)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `receta`
--
CREATE TABLE receta (
  CodInsumo varchar(255) NOT NULL,
  CodProducto varchar(255) NOT NULL,
  CantidadReceta int(11) DEFAULT NULL,
  PRIMARY KEY (CodProducto, CodInsumo)
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE receta
ADD CONSTRAINT FK_receta_CodInsumo FOREIGN KEY (CodInsumo)
REFERENCES insumo (CodInsumo) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE receta
ADD CONSTRAINT FK_receta_CodProducto FOREIGN KEY (CodProducto)
REFERENCES producto (CodProducto) ON DELETE NO ACTION;

--
-- Create table `merma`
--
CREATE TABLE merma (
  CodSucursal varchar(255) NOT NULL,
  CodProducto varchar(255) NOT NULL,
  CantidadMerma int(11) DEFAULT NULL,
  FechaInicio date DEFAULT NULL,
  FechaFin date DEFAULT NULL,
  PRIMARY KEY (CodSucursal, CodProducto)
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE merma
ADD CONSTRAINT FK_merma_CodProducto FOREIGN KEY (CodProducto)
REFERENCES producto (CodProducto) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE merma
ADD CONSTRAINT FK_merma_CodSucursal FOREIGN KEY (CodSucursal)
REFERENCES sucursal (CodSucursal) ON DELETE CASCADE;

--
-- Create table `detallestock`
--
CREATE TABLE detallestock (
  CodSucursal varchar(255) NOT NULL,
  CodProducto varchar(255) NOT NULL,
  CantidadDetalle int(11) DEFAULT NULL,
  NombreProducto varchar(255) DEFAULT NULL,
  PRIMARY KEY (CodSucursal, CodProducto)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 3276,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE detallestock
ADD CONSTRAINT FK_detallestock_CodProducto FOREIGN KEY (CodProducto)
REFERENCES producto (CodProducto) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE detallestock
ADD CONSTRAINT FK_detallestock_CodSucursal FOREIGN KEY (CodSucursal)
REFERENCES sucursal (CodSucursal) ON DELETE NO ACTION;

--
-- Create table `roles`
--
CREATE TABLE roles (
  CodRoles varchar(255) NOT NULL,
  Descripcion varchar(255) DEFAULT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `pedidos`
--
CREATE TABLE pedidos (
  CodOrigen varchar(255) DEFAULT NULL,
  CodDestino varchar(255) DEFAULT NULL,
  CodProducto varchar(255) DEFAULT NULL,
  CantidadPedido int(11) DEFAULT NULL,
  Fecha date DEFAULT NULL,
  Estado varchar(255) DEFAULT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `asig_rol`
--
CREATE TABLE asig_rol (
  CodigoPersona varchar(255) DEFAULT NULL,
  CodRol varchar(255) DEFAULT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 5461,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

-- 
-- Dumping data for table persona
--
INSERT INTO persona VALUES
('01', 'Rodrigo', 'Rodriguez', '70796444', '36070'),
('02', 'Antonio', 'Vargas', '70754851', '36114'),
('03', 'Renato', 'Rodriguez', '78542212', '36884');

-- 
-- Dumping data for table insumo
--
INSERT INTO insumo VALUES
('111', 'aa', 'aa', 111),
('222', 'Carne', 'Kg', 111),
('333', 'Harina', 'Kg', 50);

-- 
-- Dumping data for table sucursal
--
INSERT INTO sucursal VALUES
('1', 'Central', 'Barrio Aereopuerto', -16.51246, -68.2003784, 765783592),
('2', 'Sucursal 2', 'Av 14 de Septiembre', -16.5268665145, -68.104891777, 765433210),
('3', 'Sucursal 3', 'Av. Carpio', -16.536164, -68.19351196, 752121322);

-- 
-- Dumping data for table producto
--
INSERT INTO producto VALUES
('1', 'chacha de pollo', 'chacha', 120),
('2', 'chacha de carne', 'chacha', 100),
('3', 'chacha de queso', 'chacha', 80),
('4', 'chacha de marisco', 'chacha', 110);

-- 
-- Dumping data for table roles
--
INSERT INTO roles VALUES
('01', 'Central'),
('02', 'Sucursal02'),
('03', 'Sucursal03');

-- 
-- Dumping data for table responsable
--
-- Table proyectochachas.responsable does not contain any data (it is empty)

-- 
-- Dumping data for table receta
--
INSERT INTO receta VALUES
('111', '1', 20);

-- 
-- Dumping data for table pedidos
--
INSERT INTO pedidos VALUES
('1', '2', '2', 111, '2019-06-12', 'Aceptado'),
('1', '2', '2', 60, '2019-06-13', 'Pendiente'),
('2', '1', '3', 40, '2019-06-13', 'Pendiente');

-- 
-- Dumping data for table merma
--
INSERT INTO merma VALUES
('1', '3', 90, '2019-06-11', '2019-06-11');

-- 
-- Dumping data for table envio
--
INSERT INTO envio VALUES
('1', '2', '1', 423, '2019-05-28'),
('2', '1', '1', 432, '2019-05-28'),
('1', '2', '1', 987, '2019-05-28'),
('1', '2', '2', 423, '2019-05-28'),
('1', '1', '1', 5678, '2019-06-04'),
('2', '1', '1', 89, '2019-06-04'),
('1', '2', '2', 80, '2019-06-12');

-- 
-- Dumping data for table detallestock
--
INSERT INTO detallestock VALUES
('1', '1', 120, 'chacha de pollo'),
('1', '2', 100, 'chacha de carne'),
('1', '3', 80, 'chacha de queso'),
('1', '4', 110, 'chacha de marisco');

-- 
-- Dumping data for table asig_rol
--
INSERT INTO asig_rol VALUES
('01', '01'),
('02', '02'),
('03', '03');

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;